document.addEventListener("DOMContentLoaded",function(){let e=window.location.hostname,t="localhost"===e||"127.0.0.1"===e,o=window.location.pathname.replace(/\/$/,""),r="locationRedirected";console.log("Hostname:",e),console.log("Is local environment:",t),console.log("Current path:",o),fetch("https://ipinfo.io?token=044b0523070f3b").then(e=>{if(console.log("IP info response status:",e.status),!e.ok)throw Error("Network response was not ok "+e.statusText);return e.json()}).then(e=>{console.log("IP info data received:",e);let a=e.city.toLowerCase().replace(/\s+/g,"-");console.log("User location (formatted):",a);let n={"baton-rouge":"Baton Rouge",zachary:"Zachary",prairieville:"Prairieville","denham-springs":"Denham Springs",gonzales:"Gonzales",central:"Central",walker:"Walker",baker:"Baker","port-allen":"Port Allen",addis:"Addis",plaquemine:"Plaquemine","st-amant":"St. Amant",geismar:"Geismar"},l=t?`/public/${a}`:`/${a}`,i=l.replace(/\/$/,"");console.log("Expected path based on location:",i);let s=o===i||(""===o||"/"===o||"/index.html"===o)&&"baton-rouge"===a;if(console.log("Is on correct page:",s),"true"===sessionStorage.getItem(r)){console.log("User has already been redirected or declined redirection.");return}if(n[a]){if(s)console.log("User is already on the correct page.");else{console.log("User is not on the correct page, asking for redirection consent.");let c=confirm(`It looks like you're in ${n[a]}. Would you like to visit the ${n[a]} page?`);c?(console.log("User accepted redirection."),sessionStorage.setItem(r,"true"),window.location.href=i):(console.log("User declined redirection."),sessionStorage.setItem(r,"true"))}}else{console.log("User's location is not served, redirecting to Baton Rouge.");let g=t?"/public/baton-rouge":"/baton-rouge";o!==g&&(sessionStorage.setItem(r,"true"),window.location.href=g)}}).catch(e=>{console.error("Error fetching location data:",e);let a=t?"/public/baton-rouge":"/baton-rouge";o!==a&&"true"!==sessionStorage.getItem(r)&&(sessionStorage.setItem(r,"true"),window.location.href=a)})});