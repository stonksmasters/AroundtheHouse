document.addEventListener("DOMContentLoaded",function(){let e=window.location.hostname,t="localhost"===e||"127.0.0.1"===e,o=window.location.pathname.replace(/\/$/,""),r="locationRedirected";console.log("Hostname:",e),console.log("Is local environment:",t),console.log("Current path:",o);let a={"baton-rouge":"Baton Rouge",zachary:"Zachary",prairieville:"Prairieville","denham-springs":"Denham Springs",gonzales:"Gonzales",central:"Central",walker:"Walker",baker:"Baker","port-allen":"Port Allen",addis:"Addis",plaquemine:"Plaquemine","st-amant":"St. Amant",geismar:"Geismar"};if(navigator.geolocation)navigator.geolocation.getCurrentPosition(e=>{let n=e.coords.latitude,l=e.coords.longitude;fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${n}&longitude=${l}&localityLanguage=en`).then(e=>e.json()).then(e=>{let n=e.city.toLowerCase().replace(/\s+/g,"-");console.log("User location (formatted):",n);let l=t?`/public/${n}`:`/${n}`,i=l.replace(/\/$/,"");console.log("Expected path based on location:",i);let c=o===i||(""===o||"/"===o||"/index.html"===o)&&"baton-rouge"===n;if(console.log("Is on correct page:",c),"true"===sessionStorage.getItem(r)){console.log("User has already been redirected or declined redirection.");return}if(a[n]){if(c)console.log("User is already on the correct page.");else{console.log("User is not on the correct page, asking for redirection consent.");let s=confirm(`It looks like you're in ${a[n]}. Would you like to visit the ${a[n]} page?`);s?(console.log("User accepted redirection."),sessionStorage.setItem(r,"true"),window.location.href=i):(console.log("User declined redirection."),sessionStorage.setItem(r,"true"))}}else{console.log("User's location is not served, redirecting to Baton Rouge.");let g=t?"/public/baton-rouge":"/baton-rouge";o!==g&&(sessionStorage.setItem(r,"true"),window.location.href=g)}}).catch(e=>{console.error("Error during reverse geocoding:",e);let a=t?"/public/baton-rouge":"/baton-rouge";o!==a&&"true"!==sessionStorage.getItem(r)&&(sessionStorage.setItem(r,"true"),window.location.href=a)})},e=>{console.error("Error getting user's location:",e);let a=t?"/public/baton-rouge":"/baton-rouge";o!==a&&"true"!==sessionStorage.getItem(r)&&(sessionStorage.setItem(r,"true"),window.location.href=a)});else{console.error("Geolocation is not supported by this browser.");let n=t?"/public/baton-rouge":"/baton-rouge";o!==n&&"true"!==sessionStorage.getItem(r)&&(sessionStorage.setItem(r,"true"),window.location.href=n)}});