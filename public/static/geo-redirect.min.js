document.addEventListener("DOMContentLoaded",function(){let e=window.location.hostname,t="localhost"===e||"127.0.0.1"===e,o=window.location.pathname.replace(/\/$/,""),r="locationRedirected";console.log("Hostname:",e),console.log("Is local environment:",t),console.log("Current path:",o);let a={"baton-rouge":"Baton Rouge",zachary:"Zachary",prairieville:"Prairieville","denham-springs":"Denham Springs",gonzales:"Gonzales",central:"Central",walker:"Walker",baker:"Baker","port-allen":"Port Allen",addis:"Addis",plaquemine:"Plaquemine","st-amant":"St. Amant",geismar:"Geismar"};if(navigator.geolocation)navigator.geolocation.getCurrentPosition(e=>{let l;fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e.coords.latitude}&longitude=${e.coords.longitude}&localityLanguage=en`).then(e=>e.json()).then(e=>{let l=e.city.toLowerCase().replace(/\s+/g,"-");console.log("User location (formatted):",l);let n=t?`/public/${l}`:`/${l}`;n=n.replace(/\/$/,""),console.log("Expected path based on location:",n);let i=o===n||(""===o||"/"===o||"/index.html"===o)&&"baton-rouge"===l;if(console.log("Is on correct page:",i),"true"===sessionStorage.getItem(r)){console.log("User has already been redirected or declined redirection.");return}if(a[l])i?console.log("User is already on the correct page."):confirm(`It looks like you're in ${a[l]}. Would you like to visit the ${a[l]} page?`)?(sessionStorage.setItem(r,"true"),window.location.href=n):sessionStorage.setItem(r,"true");else{console.log("User's location is not served, redirecting to Baton Rouge.");let s=t?"/public/baton-rouge":"/baton-rouge";o!==s&&(sessionStorage.setItem(r,"true"),window.location.href=s)}}).catch(e=>{console.error("Error during reverse geocoding:",e);let a=t?"/public/baton-rouge":"/baton-rouge";o!==a&&"true"!==sessionStorage.getItem(r)&&(sessionStorage.setItem(r,"true"),window.location.href=a)})},e=>{console.error("Error getting user's location:",e);let a=t?"/public/baton-rouge":"/baton-rouge";o!==a&&"true"!==sessionStorage.getItem(r)&&(sessionStorage.setItem(r,"true"),window.location.href=a)});else{console.error("Geolocation is not supported by this browser.");let l=t?"/public/baton-rouge":"/baton-rouge";o!==l&&"true"!==sessionStorage.getItem(r)&&(sessionStorage.setItem(r,"true"),window.location.href=l)}});